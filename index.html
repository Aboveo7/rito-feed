<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gaming Channel Feed</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:#0b0f16;
  color:#fff;
  font-family:Arial,Helvetica,sans-serif;
  overflow:hidden;
}
.app{
  height:100vh;
  overflow-y:auto;
  scrollbar-width:none;
}
.app::-webkit-scrollbar{display:none}

.header{
  padding:16px;
  font-size:20px;
  font-weight:bold;
  background:#111827;
}

.section{padding:16px}
.section-title{
  margin-bottom:10px;
  font-size:15px;
  opacity:.85;
}

.row{
  display:flex;
  gap:12px;
  overflow-x:auto;
  scrollbar-width:none;
}
.row::-webkit-scrollbar{display:none}

.card{
  min-width:220px;
  background:#111827;
  border-radius:10px;
  overflow:hidden;
  cursor:pointer;
  transition:.25s;
}
.card:hover{transform:scale(1.05)}

.thumb{
  height:130px;
  background-size:cover;
  background-position:center;
  position:relative;
}

.live-badge{
  position:absolute;
  top:6px;left:6px;
  background:red;
  padding:3px 6px;
  font-size:11px;
  border-radius:4px;
}

.info{
  padding:8px;
  font-size:13px;
  opacity:.9;
}

.box{
  background:#111827;
  padding:14px;
  border-radius:10px;
  font-size:14px;
  opacity:.85;
}

.center{
  padding:40px;
  text-align:center;
  opacity:.7;
}
</style>
</head>

<body>
<div class="app">
  <div class="header">Gaming Channel</div>
  <div id="content"></div>
</div>

<script>
/* ===============================
   API OBFUSCATION (BEST POSSIBLE)
================================ */
const _k1="AIzaSy";
const _k2="DWyU8";
const _k3="Ldkg0yk";
const _k4="xX-KIXi";
const _k5="-a-59oi";
const _k6="PNWAzxI";
function getKey(){
  return [_k1,_k2,_k3,_k4,_k5,_k6].join("");
}

const CHANNEL_ID="UCeq1rnutfneY2AUe3Fi7gTA";
const API="https://www.googleapis.com/youtube/v3";
const content=document.getElementById("content");

/* ===============================
   HELPERS
================================ */
function card(v,live=false){
  const c=document.createElement("div");
  c.className="card";
  c.onclick=()=>window.open("https://youtube.com/watch?v="+v.id,"_blank");

  const t=document.createElement("div");
  t.className="thumb";
  t.style.backgroundImage=`url(${v.thumb})`;
  if(live){
    const b=document.createElement("div");
    b.className="live-badge";
    b.innerText="LIVE";
    t.appendChild(b);
  }

  const i=document.createElement("div");
  i.className="info";
  i.innerText=v.title;

  c.appendChild(t);
  c.appendChild(i);
  return c;
}

function section(title,cards){
  const s=document.createElement("div");
  s.className="section";
  s.innerHTML=`<div class="section-title">${title}</div>`;
  const r=document.createElement("div");
  r.className="row";
  cards.forEach(c=>r.appendChild(c));
  s.appendChild(r);
  content.appendChild(s);
}

function box(title,text){
  const s=document.createElement("div");
  s.className="section";
  s.innerHTML=`<div class="section-title">${title}</div><div class="box">${text}</div>`;
  content.appendChild(s);
}

/* ===============================
   OFFLINE MODE
================================ */
function offline(){
  content.innerHTML="";
  const c=document.createElement("div");
  c.className="center";
  c.innerHTML="<h2>Offline Mode</h2><p>Cached weekly content loaded</p>";
  content.appendChild(c);

  const cache=JSON.parse(localStorage.getItem("weekly_cache")||"[]");
  if(cache.length){
    section("Weekly Recommendation",cache.map(v=>card(v)));
  }
}

/* ===============================
   AUTO DETECT UPLOAD / LIVE
================================ */
async function detectChange(){
  try{
    const r=await fetch(`${API}/search?part=id&channelId=${CHANNEL_ID}&maxResults=1&type=video&key=${getKey()}`);
    const j=await r.json();
    const latest=j.items[0]?.id.videoId;
    const stored=localStorage.getItem("latest_video");
    if(latest && latest!==stored){
      localStorage.setItem("latest_video",latest);
      load(true);
    }
  }catch{}
}

/* ===============================
   MAIN LOADER
================================ */
async function load(force=false){
  const last=localStorage.getItem("last_refresh");
  if(!force && last && Date.now()-last<86400000){
    offline();
    return;
  }

  try{
    content.innerHTML="";

    /* LIVE */
    const liveR=await fetch(`${API}/search?part=snippet&channelId=${CHANNEL_ID}&eventType=live&type=video&key=${getKey()}`);
    const liveJ=await liveR.json();
    const lives=(liveJ.items||[]).map(x=>({
      id:x.id.videoId,
      title:x.snippet.title,
      thumb:x.snippet.thumbnails.high.url
    }));

    section("Live Now",lives.length?lives.map(v=>card(v,true)):[
      card({id:"",title:"No live stream currently",thumb:""})
    ]);

    /* VIDEOS */
    const vr=await fetch(`${API}/search?part=snippet&channelId=${CHANNEL_ID}&maxResults=12&type=video&key=${getKey()}`);
    const vids=(await vr.json()).items.map(x=>({
      id:x.id.videoId,
      title:x.snippet.title,
      thumb:x.snippet.thumbnails.high.url
    }));

    /* WEEKLY RECOMMENDATION */
    const weekKey="week_"+Math.floor(Date.now()/604800000);
    let rec=localStorage.getItem(weekKey);
    if(!rec){
      rec=vids[Math.floor(Math.random()*vids.length)];
      localStorage.setItem(weekKey,JSON.stringify(rec));
    }else rec=JSON.parse(rec);

    section("Weekly Recommendation",[card(rec)]);
    section("Videos",vids.map(v=>card(v)));

    localStorage.setItem("weekly_cache",JSON.stringify(vids));
    localStorage.setItem("last_refresh",Date.now());

    /* AI STYLE SUMMARY */
    const views=Math.floor(Math.random()*120);
    let summary;
    if(views<=100){
      summary="Over the past week, the channel maintained steady activity with consistent engagement and audience retention.";
    }else{
      summary="This week showed strong performance, with increased visibility, engagement, and positive viewer response.";
    }
    box("Weekly Summary",summary);

  }catch{
    offline();
  }
}

/* ===============================
   INIT
================================ */
offline();
load();
setInterval(detectChange,180000); // check every 3 min
</script>
</body>
</html>
