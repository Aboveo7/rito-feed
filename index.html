<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>YouTube Channel Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
html,body{
  margin:0;
  padding:0;
  background:#000;
  color:#fff;
  font-family:Arial,Helvetica,sans-serif;
  overflow-x:hidden;
}

/* HIDE SCROLLBAR COMPLETELY */
*{
  box-sizing:border-box;
  scrollbar-width:none;
}
*::-webkit-scrollbar{
  width:0;
  height:0;
  display:none;
}

.container{
  padding:16px;
}

.section-title{
  margin:28px 0 12px;
  font-size:16px;
  letter-spacing:2px;
}

.slider{
  display:flex;
  gap:16px;
  overflow-x:auto;
  scroll-behavior:smooth;
}

.video-card{
  min-width:240px;
  background:#111;
  border-radius:14px;
  overflow:hidden;
  cursor:pointer;
  transition:transform .25s;
}
.video-card:hover{transform:scale(1.05)}

.thumbnail{
  width:100%;
  aspect-ratio:16/9;
  object-fit:cover;
}

.video-info{
  padding:10px;
  font-size:13px;
}

.live-badge{
  position:absolute;
  top:8px;
  left:8px;
  background:red;
  color:#fff;
  padding:4px 8px;
  font-size:11px;
  border-radius:6px;
}

.summary-box{
  background:#111;
  padding:14px;
  border-radius:14px;
  line-height:1.6;
  font-size:14px;
}

.loader{
  height:260px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}

.spinner{
  width:40px;
  height:40px;
  border:4px solid #333;
  border-top:4px solid #fff;
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>

<div class="container" id="app">
  <div class="loader">
    <div class="spinner"></div>
    <div style="margin-top:10px">Loading channel dataâ€¦</div>
  </div>
</div>

<script>
const API_KEY = "AIzaSyBn0yn2FxDc9JIUt8InDm5O2lAxUIIEm94";
const CHANNEL_ID = "UCeq1rnutfneY2AUe3Fi7gTA";
const API_URL = "https://www.googleapis.com/youtube/v3";
const app = document.getElementById("app");

/* SAFE FETCH */
async function fetchJSON(url){
  const res = await fetch(url);
  if(!res.ok) throw new Error("API");
  return res.json();
}

/* CARD */
function createCard(video,isLive=false){
  return `
  <div class="video-card" onclick="window.open('https://www.youtube.com/watch?v=${video.id}','_blank')">
    <div style="position:relative">
      <img class="thumbnail" src="${video.snippet.thumbnails.high.url}">
      ${isLive ? `<div class="live-badge">LIVE</div>` : ``}
    </div>
    <div class="video-info">${video.snippet.title}</div>
  </div>`;
}

/* DAILY RECOMMENDED */
function getDailyRecommended(list){
  const key="daily_video_id";
  const timeKey="daily_video_time";
  const now=Date.now();
  const day=86400000;

  const saved=localStorage.getItem(key);
  const savedTime=localStorage.getItem(timeKey);

  if(saved && savedTime && now-savedTime<day){
    const found=list.find(v=>v.id===saved);
    if(found) return found;
  }

  const pick=list[Math.floor(Math.random()*list.length)];
  localStorage.setItem(key,pick.id);
  localStorage.setItem(timeKey,now);
  return pick;
}

/* SUMMARY */
function generateSummary(videos,lives){
  const now=Date.now();
  const month=30*86400000;
  let uploads=0,views=0;

  videos.forEach(v=>{
    if(now-new Date(v.snippet.publishedAt)<month){
      uploads++;
      views+=Number(v.statistics.viewCount||0);
    }
  });

  return `During the last month, the channel uploaded ${uploads} videos and conducted ${lives} live streams, gaining approximately ${views.toLocaleString()} views. Content delivery remained consistent, maintaining steady engagement within the gaming audience.`;
}

/* INIT */
async function init(){
  try{
    app.innerHTML="";

    /* GET RECENT CONTENT */
    const search = await fetchJSON(
      `${API_URL}/search?part=snippet&channelId=${CHANNEL_ID}&type=video&maxResults=25&key=${API_KEY}`
    );

    const ids = search.items.map(i=>i.id.videoId).join(",");

    const data = await fetchJSON(
      `${API_URL}/videos?part=snippet,statistics,contentDetails,liveStreamingDetails&id=${ids}&key=${API_KEY}`
    );

    const items = data.items;

    /* CLASSIFY */
    const liveNow = items.filter(v =>
      v.liveStreamingDetails &&
      v.liveStreamingDetails.actualStartTime &&
      !v.liveStreamingDetails.actualEndTime
    );

    const livePast = items.filter(v =>
      v.liveStreamingDetails &&
      v.liveStreamingDetails.actualEndTime
    );

    const shorts = items.filter(v =>
      v.contentDetails.duration.startsWith("PT") &&
      v.contentDetails.duration.match(/PT\d+S|PT\d+M/)
    );

    const videos = items.filter(v =>
      !shorts.includes(v) &&
      !v.liveStreamingDetails
    );

    const mostViewed = [...videos].sort(
      (a,b)=>b.statistics.viewCount-a.statistics.viewCount
    )[0];

    const recommended = getDailyRecommended(items);
    const summary = generateSummary(videos,liveNow.length+livePast.length);

    /* RENDER */
    app.innerHTML = `
      <div class="section-title">LIVE</div>
      <div class="slider">
        ${(liveNow.length?liveNow:livePast).map(v=>createCard(v,true)).join("")}
      </div>

      <div class="section-title">VIDEOS</div>
      <div class="slider">
        ${videos.map(v=>createCard(v)).join("")}
      </div>

      <div class="section-title">RECOMMENDED TODAY</div>
      <div class="slider">
        ${recommended?createCard(recommended):""}
      </div>

      <div class="section-title">MOST VIEWED</div>
      <div class="slider">
        ${mostViewed?createCard(mostViewed):""}
      </div>

      <div class="section-title">SHORTS</div>
      <div class="slider">
        ${shorts.map(v=>createCard(v)).join("")}
      </div>

      <div class="section-title">SUMMARY</div>
      <div class="summary-box">${summary}</div>
    `;
  }
  catch(e){
    app.innerHTML = `
      <div class="loader">
        <div class="spinner"></div>
        <div style="margin-top:10px">API key restriction or quota issue</div>
      </div>`;
  }
}

init();
setInterval(init,30000);
</script>
</body>
</html>
