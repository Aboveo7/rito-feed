<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>YouTube Gaming Feed</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
html,body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Segoe UI,Arial;
  overflow-x:hidden;
}

/* SCROLLBAR HIDE */
*{
  box-sizing:border-box;
  scrollbar-width:none;
}
*::-webkit-scrollbar{
  width:0;
  height:0;
  display:none;
}

.app-container{padding:18px}

.section-title{
  font-size:18px;
  margin:28px 0 14px;
  letter-spacing:2px;
}

.horizontal-list{
  display:flex;
  gap:16px;
  overflow-x:auto;
  scroll-behavior:smooth;
}

.video-card{
  min-width:240px;
  background:#111;
  border-radius:14px;
  overflow:hidden;
  cursor:pointer;
  transition:.25s;
}
.video-card:hover{transform:scale(1.05)}

.thumbnail{
  width:100%;
  aspect-ratio:16/9;
  object-fit:cover;
  background:#000;
}

.video-title{
  padding:10px;
  font-size:13px;
}

.live-badge{
  position:absolute;
  top:8px;
  left:8px;
  background:#ff0000;
  padding:4px 8px;
  border-radius:6px;
  font-size:11px;
}

.info-box{
  background:#0f0f0f;
  padding:14px;
  border-radius:14px;
  line-height:1.6;
  opacity:.95;
}

/* LOADER */
.loader{
  height:260px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}
.spinner{
  width:42px;height:42px;
  border:4px solid #333;
  border-top:4px solid #fff;
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>
<div class="app-container" id="app">
  <div class="loader">
    <div class="spinner"></div>
    <div style="margin-top:12px">Loading channel dataâ€¦</div>
  </div>
</div>

<script>
const API_KEY="AIzaSyBn0yn2FxDc9JIUt8InDm5O2lAxUIIEm94";
const CHANNEL_ID="UCeq1rnutfneY2AUe3Fi7gTA";
const API="https://www.googleapis.com/youtube/v3";
const app=document.getElementById("app");

function showError(){
  app.innerHTML=`
  <div class="loader">
    <div style="font-size:38px">ðŸŽ®</div>
    <div>UNDER CONSTRUCTION</div>
    <div style="opacity:.6">API unavailable</div>
  </div>`;
}

async function fetchData(url){
  const res=await fetch(url);
  if(!res.ok) throw 0;
  return res.json();
}

function openVideo(id){
  window.open("https://youtube.com/watch?v="+id,"_blank");
}

function videoCard(video,isLive=false){
  return `
  <div class="video-card" onclick="openVideo('${video.id}')">
    <div style="position:relative">
      <img class="thumbnail" src="${video.snippet.thumbnails.high.url}">
      ${isLive?'<div class="live-badge">LIVE</div>':''}
    </div>
    <div class="video-title">${video.snippet.title}</div>
  </div>`;
}

/* RECOMMENDED â€“ 24 HOURS FIXED */
function getDailyRecommendation(items){
  const KEY="daily_recommend_id";
  const TIME="daily_recommend_time";
  const DAY=86400000;
  const now=Date.now();

  const savedId=localStorage.getItem(KEY);
  const savedTime=localStorage.getItem(TIME);

  if(savedId && savedTime && (now - savedTime < DAY)){
    const found=items.find(v=>v.id===savedId);
    if(found) return found;
  }

  const pick=items[Math.floor(Math.random()*items.length)];
  localStorage.setItem(KEY,pick.id);
  localStorage.setItem(TIME,now);
  return pick;
}

/* MONTHLY SUMMARY */
function buildMonthlySummary(videos,lives){
  const now=Date.now();
  const MONTH=30*24*60*60*1000;

  let uploads=0;
  let views=0;

  videos.forEach(v=>{
    const published=new Date(v.snippet.publishedAt).getTime();
    if(now-published<MONTH){
      uploads++;
      views+=Number(v.statistics.viewCount||0);
    }
  });

  const frequency=uploads
    ? `roughly ${Math.round(30/uploads)} days per upload`
    : "low upload frequency";

  return `During the last 30 days, the channel published ${uploads} videos and hosted ${lives} live streams, generating approximately ${views.toLocaleString()} views. Content output remained consistent with a ${frequency}, maintaining steady engagement within the gaming audience.`;
}

async function init(){
  try{
    app.innerHTML="";

    const search=await fetchData(
      `${API}/search?part=id&channelId=${CHANNEL_ID}&type=video&maxResults=15&key=${API_KEY}`
    );

    const ids=search.items.map(i=>i.id.videoId).join(",");

    const videosData=await fetchData(
      `${API}/videos?part=snippet,statistics,liveStreamingDetails&id=${ids}&key=${API_KEY}`
    );

    const items=videosData.items;

    const liveVideos=items.filter(v=>v.liveStreamingDetails?.actualStartTime);
    const mostViewed=[...items].sort((a,b)=>b.statistics.viewCount-a.statistics.viewCount);
    const recommended=getDailyRecommendation(items);
    const summary=buildMonthlySummary(items,liveVideos.length);

    app.innerHTML+=`
      <div class="section-title">Live</div>
      <div class="horizontal-list">
        ${liveVideos.length
          ? liveVideos.map(v=>videoCard(v,true)).join("")
          : `<div class="info-box">No live stream right now</div>`}
      </div>

      <div class="section-title">Most Viewed</div>
      <div class="horizontal-list">
        ${mostViewed.slice(0,6).map(videoCard).join("")}
      </div>

      <div class="section-title">Recommended Today</div>
      <div class="horizontal-list">
        ${recommended?videoCard(recommended):""}
      </div>

      <div class="section-title">Videos</div>
      <div class="horizontal-list">
        ${items.map(videoCard).join("")}
      </div>

      <div class="section-title">Monthly Summary</div>
      <div class="info-box">${summary}</div>
    `;
  }catch{
    showError();
  }
}

init();
setInterval(init,30000);
</script>
</body>
</html>
