<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Creator Feed</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
html,body{
  margin:0;
  background:radial-gradient(circle at top,#111 0%,#000 65%);
  color:#fff;
  font-family:Segoe UI,Arial;
  overflow-x:hidden;
  min-height:100vh;
}

/* hide scrollbar but keep scroll */
*{
  box-sizing:border-box;
  scrollbar-width:none;
}
*::-webkit-scrollbar{
  width:0;height:0;
}

.root{padding:18px}
.title{
  font-size:18px;
  margin:26px 0 14px;
  letter-spacing:3px;
}

.slider{
  display:flex;
  gap:16px;
  overflow-x:auto;
  scroll-behavior:smooth;
}

.card{
  min-width:240px;
  background:#111;
  border-radius:14px;
  overflow:hidden;
  cursor:pointer;
  transition:.25s;
}
.card:hover{transform:scale(1.05)}

.thumb{width:100%;aspect-ratio:16/9;object-fit:cover}
.meta{padding:10px;font-size:13px}

.live{
  position:absolute;
  top:8px;left:8px;
  background:#ff0000;
  padding:4px 8px;
  border-radius:6px;
  font-size:11px;
}

.box{
  background:#0f0f0f;
  padding:14px;
  border-radius:14px;
  line-height:1.6;
  opacity:.9;
}

.loader{
  height:260px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}
.spin{
  width:40px;height:40px;
  border:4px solid #333;
  border-top:4px solid #fff;
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>
<div class="root" id="app">
  <div class="loader">
    <div class="spin"></div>
    <div style="margin-top:12px">Loading creator feedâ€¦</div>
  </div>
</div>

<script>
/* ========= CONFIG ========= */

// ðŸ‘‡ PASTE YOUR API KEY HERE
const KEY_RAW = "AIzaSyDWyU8Ldkg0ykxX-KIXi-a-59oiPNWAzxI";

/* channel */
const CHANNEL_ID = "UCeq1rnutfneY2AUe3Fi7gTA";

/* obfuscation */
const API_KEY = KEY_RAW.split("").reverse().join("");

const API = "https://www.googleapis.com/youtube/v3";
const app = document.getElementById("app");

/* ========= UTIL ========= */

function openVid(id){
  window.open("https://youtube.com/watch?v="+id,"_blank");
}

function card(v,isLive=false){
  return `
  <div class="card" onclick="openVid('${v.id}')">
    <div style="position:relative">
      <img class="thumb" src="${v.thumb}">
      ${isLive?'<div class="live">LIVE</div>':''}
    </div>
    <div class="meta">${v.title}</div>
  </div>`;
}

function minutes(duration){
  const m = duration.match(/PT(\d+)M/);
  return m ? parseInt(m[1]) : 0;
}

/* ========= CACHE ========= */

const CACHE_KEY = "creator_cache_v1";
const WEEK_KEY = "weekly_pick";

/* ========= DATA ========= */

async function fetchJSON(url){
  const r = await fetch(url);
  if(!r.ok) throw 0;
  return r.json();
}

/* ========= MAIN ========= */

async function init(force=false){
  let cache = JSON.parse(localStorage.getItem(CACHE_KEY) || "{}");
  const now = Date.now();

  if(!force && cache.time && now - cache.time < 86400000){
    render(cache.data);
    return;
  }

  try{
    const search = await fetchJSON(
      `${API}/search?part=id&channelId=${CHANNEL_ID}&type=video&maxResults=25&key=${API_KEY}`
    );

    const ids = search.items.map(x=>x.id.videoId).join(",");

    const data = await fetchJSON(
      `${API}/videos?part=snippet,statistics,contentDetails,liveStreamingDetails&id=${ids}&key=${API_KEY}`
    );

    const all = data.items.map(v=>({
      id:v.id,
      title:v.snippet.title,
      thumb:v.snippet.thumbnails.high.url,
      views:+v.statistics.viewCount,
      duration:v.contentDetails.duration,
      live:!!v.liveStreamingDetails?.actualStartTime
    }));

    localStorage.setItem(CACHE_KEY, JSON.stringify({
      time:now,
      data:all
    }));

    render(all);
  }catch{
    if(cache.data) render(cache.data);
  }
}

/* ========= RENDER ========= */

function render(all){
  const videos = all.filter(v=>!v.live && minutes(v.duration)>=2);
  const lives = all.filter(v=>v.live);

  const mostViewed = videos.sort((a,b)=>b.views-a.views)[0];
  const restVideos = videos.filter(v=>v!==mostViewed).sort(()=>0.5-Math.random());

  /* weekly recommendation */
  let weekly = localStorage.getItem(WEEK_KEY);
  if(!weekly){
    weekly = restVideos[0]?.id;
    localStorage.setItem(WEEK_KEY, weekly);
  }
  const weeklyVid = videos.find(v=>v.id===weekly);

  /* summary */
  const topicMap = {};
  videos.forEach(v=>{
    const key = v.title.split(" ")[0].toLowerCase();
    topicMap[key] = (topicMap[key]||0) + v.views;
  });
  const best = Object.entries(topicMap).sort((a,b)=>b[1]-a[1])[0]?.[0] || "variety";

  app.innerHTML = `
    <div class="title">LIVE STREAMS</div>
    <div class="slider">
      ${(lives.length?lives:videos.slice(0,3)).map(v=>card(v, v.live)).join("")}
    </div>

    <div class="title">WEEKLY RECOMMENDATION</div>
    <div class="slider">
      ${weeklyVid?card(weeklyVid):""}
    </div>

    <div class="title">VIDEOS</div>
    <div class="slider">
      ${[mostViewed,...restVideos.slice(0,6)].map(v=>card(v)).join("")}
    </div>

    <div class="title">SUMMARY</div>
    <div class="box">
      This channel performs best around <b>${best}</b> based content.
      The creator focuses on engaging gameplay and consistent uploads,
      showing a clear style that resonates with viewers.
    </div>
  `;
}

/* init */
init();

/* refresh only once in 24h */
setInterval(()=>init(false),86400000);
</script>
</body>
</html>
