<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RITO GAMING HUB</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
html,body{margin:0;background:#000;color:#fff;font-family:Arial;overflow-x:hidden}
*{scrollbar-width:none}*::-webkit-scrollbar{display:none}
.wrap{padding:16px}
h2{margin:28px 0 12px;font-size:16px;letter-spacing:3px}
.slider{display:flex;gap:16px;overflow-x:auto;scroll-behavior:smooth}
.card{min-width:240px;background:#111;border-radius:14px;overflow:hidden;cursor:pointer}
.thumb{width:100%;aspect-ratio:16/9;object-fit:cover}
.meta{padding:10px;font-size:13px}
.live{position:absolute;top:8px;left:8px;background:red;padding:4px 8px;font-size:11px;border-radius:6px}
.box{background:#111;padding:14px;border-radius:14px;line-height:1.6}
.loader{height:260px;display:flex;align-items:center;justify-content:center;flex-direction:column}
.spin{width:40px;height:40px;border:4px solid #333;border-top:4px solid #fff;border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>
<div class="wrap" id="app">
  <div class="loader">
    <div class="spin"></div>
    <div style="margin-top:10px">Loading gaming dataâ€¦</div>
  </div>
</div>

<script>
const API_KEY="AIzaSyBn0yn2FxDc9JIUt8InDm5O2lAxUIIEm94";
const CHANNEL="UCeq1rnutfneY2AUe3Fi7gTA";
const API="https://www.googleapis.com/youtube/v3";
const app=document.getElementById("app");

async function get(url){
  const r=await fetch(url);
  if(!r.ok) throw "API error";
  return r.json();
}

function card(v,live=false){
  return `
  <div class="card" onclick="window.open('https://youtube.com/watch?v=${v.id}','_blank')">
    <div style="position:relative">
      <img class="thumb" src="${v.snippet.thumbnails.high.url}">
      ${live?'<div class="live">LIVE</div>':''}
    </div>
    <div class="meta">${v.snippet.title}</div>
  </div>`;
}

/* DAILY RECOMMENDED */
function dailyPick(list){
  const k="rito_rec",t="rito_time",day=86400000,now=Date.now();
  const s=localStorage.getItem(k),st=localStorage.getItem(t);
  if(s&&st&&now-st<day){
    const f=list.find(x=>x.id===s);
    if(f) return f;
  }
  const p=list[Math.floor(Math.random()*list.length)];
  localStorage.setItem(k,p.id);
  localStorage.setItem(t,now);
  return p;
}

/* SUMMARY */
function summary(videos,lives){
  const m=30*86400000,now=Date.now();
  let up=0,views=0;
  videos.forEach(v=>{
    if(now-new Date(v.snippet.publishedAt)<m){
      up++;
      views+=Number(v.statistics.viewCount||0);
    }
  });
  return `Over the past month, the channel maintained consistent gaming activity with ${up} uploads and ${lives} live sessions, generating roughly ${views.toLocaleString()} views. Engagement remained stable, reflecting steady audience retention and regular content output.`;
}

async function init(){
  try{
    app.innerHTML="";

    /* LIVE */
    const liveS=await get(`${API}/search?part=snippet&channelId=${CHANNEL}&eventType=live&type=video&key=${API_KEY}`);
    const liveIds=liveS.items.map(x=>x.id.videoId);
    let liveV=[];
    if(liveIds.length){
      const d=await get(`${API}/videos?part=snippet,statistics,liveStreamingDetails&id=${liveIds}&key=${API_KEY}`);
      liveV=d.items.filter(v=>v.liveStreamingDetails && !v.liveStreamingDetails.actualEndTime);
    }

    /* PREVIOUS LIVE */
    if(!liveV.length){
      const prev=await get(`${API}/search?part=snippet&channelId=${CHANNEL}&eventType=completed&type=video&maxResults=6&key=${API_KEY}`);
      const ids=prev.items.map(x=>x.id.videoId).join(",");
      const d=await get(`${API}/videos?part=snippet,statistics&id=${ids}&key=${API_KEY}`);
      liveV=d.items;
    }

    /* VIDEOS (NO SHORTS) */
    const vidS=await get(`${API}/search?part=snippet&channelId=${CHANNEL}&type=video&videoDuration=medium&maxResults=15&key=${API_KEY}`);
    const vidIds=vidS.items.map(x=>x.id.videoId).join(",");
    const vids=(await get(`${API}/videos?part=snippet,statistics&id=${vidIds}&key=${API_KEY}`)).items;

    /* SHORTS */
    const shS=await get(`${API}/search?part=snippet&channelId=${CHANNEL}&type=video&videoDuration=short&maxResults=10&key=${API_KEY}`);
    const shIds=shS.items.map(x=>x.id.videoId).join(",");
    const shorts=(await get(`${API}/videos?part=snippet,statistics&id=${shIds}&key=${API_KEY}`)).items;

    /* MOST VIEWED */
    const most=[...vids].sort((a,b)=>b.statistics.viewCount-a.statistics.viewCount)[0];

    /* RECOMMENDED */
    const recommended=dailyPick([...vids,...shorts,...liveV]);

    app.innerHTML+=`
      <h2>LIVE</h2><div class="slider">${liveV.map(v=>card(v,true)).join("")}</div>
      <h2>VIDEOS</h2><div class="slider">${vids.map(card).join("")}</div>
      <h2>RECOMMENDED TODAY</h2><div class="slider">${recommended?card(recommended):""}</div>
      <h2>MOST VIEWED</h2><div class="slider">${most?card(most):""}</div>
      <h2>SHORTS</h2><div class="slider">${shorts.map(card).join("")}</div>
      <h2>SUMMARY</h2><div class="box">${summary(vids,liveV.length)}</div>
    `;
  }catch(e){
    app.innerHTML=`<div class="loader"><div class="spin"></div><div>API limit or network issue</div></div>`;
  }
}

init();
setInterval(init,30000);
</script>
</body>
</html>
