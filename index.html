<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RITO GAMING FEED</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
html, body {
  margin: 0;
  background: #000;
  color: #fff;
  font-family: Segoe UI, Arial;
  overflow-x: hidden;
}

/* HARD REMOVE SCROLLBAR */
* {
  box-sizing: border-box;
  scrollbar-width: none;
}
*::-webkit-scrollbar {
  width: 0 !important;
  height: 0 !important;
  display: none !important;
}

.rito_root { padding: 18px; }

.rito_title {
  font-size: 18px;
  margin: 28px 0 14px;
  letter-spacing: 4px;
}

.rito_slider {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  scroll-behavior: smooth;
}

.rito_card {
  min-width: 240px;
  background: #111;
  border-radius: 14px;
  overflow: hidden;
  cursor: pointer;
  transition: transform .25s;
}
.rito_card:hover { transform: scale(1.05); }

.rito_thumb {
  width: 100%;
  aspect-ratio: 16/9;
  object-fit: cover;
}

.rito_meta {
  padding: 10px;
  font-size: 13px;
}

.rito_live {
  position: absolute;
  top: 8px;
  left: 8px;
  background: red;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 11px;
}

.rito_box {
  background: #0f0f0f;
  padding: 14px;
  border-radius: 14px;
  line-height: 1.6;
}

.rito_loader {
  height: 260px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}

.spin {
  width: 42px;
  height: 42px;
  border: 4px solid #333;
  border-top: 4px solid #fff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
</style>
</head>

<body>
<div class="rito_root" id="app">
  <div class="rito_loader">
    <div class="spin"></div>
    <div style="margin-top:12px">Initializing gaming feedâ€¦</div>
  </div>
</div>

<script>
const API_KEY = "AIzaSyBn0yn2FxDc9JIUt8InDm5O2lAxUIIEm94";
const CHANNEL = "UCeq1rnutfneY2AUe3Fi7gTA";
const API = "https://www.googleapis.com/youtube/v3";
const app = document.getElementById("app");

/* FAIL SAFE */
function failSafe() {
  app.innerHTML = `
  <div class="rito_loader">
    <div style="font-size:38px">ðŸŽ®</div>
    <div>UNDER CONSTRUCTION</div>
    <div style="opacity:.6">Systems offline</div>
  </div>`;
}

async function getJSON(url) {
  try {
    const r = await fetch(url);
    if (!r.ok) throw 0;
    return await r.json();
  } catch {
    failSafe();
    throw 0;
  }
}

function card(v, live=false) {
  return `
  <div class="rito_card" onclick="window.open('https://youtube.com/watch?v=${v.id}','_blank')">
    <div style="position:relative">
      <img class="rito_thumb" src="${v.snippet.thumbnails.high.url}">
      ${live ? '<div class="rito_live">LIVE</div>' : ''}
    </div>
    <div class="rito_meta">${v.snippet.title}</div>
  </div>`;
}

/* DAILY RECOMMENDED (24h FIXED) */
function getDailyRecommended(videos) {
  const VID="rito_rec_vid", TIME="rito_rec_time";
  const DAY=86400000, now=Date.now();
  const sVid=localStorage.getItem(VID);
  const sTime=localStorage.getItem(TIME);

  if (sVid && sTime && (now - sTime < DAY)) {
    const found = videos.find(v => v.id === sVid);
    if (found) return found;
  }
  const pick = videos[Math.floor(Math.random()*videos.length)];
  localStorage.setItem(VID, pick.id);
  localStorage.setItem(TIME, now);
  return pick;
}

/* MONTHLY SUMMARY (REAL) */
function generateMonthlySummary(videos) {
  const now = Date.now();
  const MONTH = 30 * 24 * 60 * 60 * 1000;

  let uploads = 0;
  let lives = 0;
  let views = 0;

  videos.forEach(v => {
    const published = new Date(v.snippet.publishedAt).getTime();
    if (now - published < MONTH) {
      uploads++;
      views += Number(v.statistics.viewCount || 0);
      if (v.liveStreamingDetails) lives++;
    }
  });

  const freq = uploads ? `~${Math.round(30/uploads)} days per upload` : "low activity";

  return `
    In the past month, the channel uploaded ${uploads} videos, 
    hosted ${lives} live streams, and gained approximately 
    ${views.toLocaleString()} views. Upload frequency remained ${freq}, 
    with consistent gaming-focused content and audience engagement.
  `;
}

/* INIT */
async function init() {
  app.innerHTML = "";

  const search = await getJSON(`${API}/search?part=id&channelId=${CHANNEL}&type=video&maxResults=15&key=${API_KEY}`);
  const ids = search.items.map(x => x.id.videoId).join(",");

  const data = await getJSON(`${API}/videos?part=snippet,statistics,liveStreamingDetails&id=${ids}&key=${API_KEY}`);
  const videos = data.items;

  const live = videos.filter(v =>
    v.liveStreamingDetails &&
    v.liveStreamingDetails.actualStartTime &&
    !v.liveStreamingDetails.actualEndTime
  );

  const mostViewed = [...videos].sort((a,b)=>b.statistics.viewCount-a.statistics.viewCount);
  const recommended = getDailyRecommended(videos);
  const summary = generateMonthlySummary(videos);

  app.innerHTML += `
    <div class="rito_title">LIVE SIGNAL</div>
    <div class="rito_slider">
      ${live.length ? live.map(v=>card(v,true)).join("") : `<div class="rito_box">No live stream right now</div>`}
    </div>

    <div class="rito_title">MOST VIEWED</div>
    <div class="rito_slider">
      ${mostViewed.slice(0,6).map(card).join("")}
    </div>

    <div class="rito_title">RECOMMENDED TODAY</div>
    <div class="rito_slider">
      ${recommended ? card(recommended) : ""}
    </div>

    <div class="rito_title">VIDEO ARCHIVE</div>
    <div class="rito_slider">
      ${videos.map(card).join("")}
    </div>

    <div class="rito_title">MONTHLY SUMMARY</div>
    <div class="rito_box">${summary}</div>
  `;
}

init();
setInterval(init, 30000);
</script>
</body>
</html>
